{% verbatim %}
<div ng-controller="UserCtrl" class="content container" ng-cloak>
    <h1>Thanks for joining</h1>
    <sil-notices></sil-notices>
    <div class="card card-block" ng-hide="showForm || errorState">
        <i id="userJoinedLoading" class="fa fa-spinner fa-spin"></i>Loading...
    </div>
    <div ng-show="showForm">
    <div class="row">
    <div class="span4">
        <form ng-submit="registerUser(record)" id="userForm" name="registrationForm" novalidate>
            <p>We just need a few more details. Please fill out the details below, and click Join when you're done.</p>
            <fieldset>
            <div class="card card-block">
                <h5>{{record.email}}</h5>
                <label>User Name</label>
                <input required type="text"
                    placeholder="pick a user name" ng-model="record.username"
                    name="username" id="username" idle-validate="checkUserName()" idle-validate-keypress="resetValidateRegistrationForm()" />
                    <span  ng-show="userNameLoading"><i id="userNameLoading" class="fa fa-spinner fa-spin" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                    <span  ng-show="userNameOk"><i id="userNameOk" class="fa fa-check" title="User name is available!" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                    <span  ng-show="userNameExists"><i id="userNameExists" class="fa fa-exclamation-circle" title="User name already exist!" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                <label>Name</label>
                <input required type="text" placeholder="your real name" ng-model="record.name" />
                <div data-ng-show="showPassword">
                    <label>Password</label>
                    <input required type="text"
                        data-ng-model="record.password" name="password" id="visiblePassword"
                        title="Passwords must be at least 7 characters" />
                    <span data-ng-show='record.password && record.password.length < 7'><i class="fa fa-exclamation-circle" title="Passwords must be at least 7 characters!" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                    <label>Confirm password</label>
                    <input type="text" disabled />
                </div>
                <div data-ng-hide="showPassword">
                    <label>Password</label>
                    <input required type="password"
                        data-ng-model="record.password" name="password" id="password"
                        title="Passwords must be at least 7 characters" />
                    <span data-ng-show='record.password && record.password.length < 7'><i class="fa fa-exclamation-circle" title="Passwords must be at least 7 characters!" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                    <label>Confirm password</label>
                    <input data-ng-required="!showPassword" type="password" data-ng-disabled="showPassword"
                        data-ng-model="confirmPassword" name="confirmPassword"
                        title="Passwords must be at least 7 characters" />
                    <span data-ng-show='record.password && record.password != confirmPassword'><i class="fa fa-exclamation-circle" title="Passwords do not match!" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                    <span data-ng-show='record.password && record.password == confirmPassword'><i class="fa fa-check" title="Passwords match" style="position: absolute; padding-left: 5px; padding-top: 8px;"></i></span>
                </div>
                <label class="checkbox"><input type="checkbox" data-ng-model="showPassword"/> Show password</label>
                <button id="submit" class="btn btn-primary" type="submit" data-ng-disabled="userNameExists || registrationForm.$invalid || requestInProgress || (!showPassword && record.password != confirmPassword) || record.password.length < 7">
                Join
                </button>
            </div>
            </fieldset>
        </form>
    </div>
    </div>
    </div>
    <div class="card card-block" ng-show="errorState">We cannot complete the registration process for you at this time.  Please <a href='/public/signup'>sign up here</a> instead.</div>
</div>
{% endverbatim %}
