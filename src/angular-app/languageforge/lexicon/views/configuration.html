<div class="container" data-ng-cloak data-ng-controller="ConfigCtrl">
<h2>{{'Dictionary Configuration' | translate}}</h2>
<form name="configForm" novalidate>
<button class="btn btn-primary {{interfaceConfig.pullToSide}}" data-ng-click="configurationApply()"  
	data-ng-disabled="configForm.$pristine">
	<i class="icon-ok"></i> {{'Apply' | translate}}</button>
<tabset>
	<tab heading="Input Systems" class="{{interfaceConfig.pullNormal}}">
		<div data-ng-include="'/angular-app/languageforge/lexicon/views/configuration-input-systems.html'"></div>
	</tab>
	<tab heading="Fields" class="{{interfaceConfig.pullNormal}}">
		<div data-ng-controller="FieldConfigCtrl">
		<div class="row outer-flex">
		
		<!-- Left column: field list -->
		<div class="span3 control-group">
			<!-- control buttons -->
			<div class="control-group">
				<button class="btn btn-success" data-ng-click="openNewCustomFieldModal()"><i class="icon-plus"></i> {{'New Custom Field' | translate}} </button>
			</div>
			
			<!-- picklist -->
			<dl class="picklists">
				<dt translate="Entry Level Fields"></dt>
				<dd><div class="controls">
					<div data-ng-repeat="fieldname in configDirty.entry.fieldOrder" 
						data-ng-click="selectField(fieldname)" 
						data-ng-class="{selected:currentField.name == fieldname}">
						<div data-ng-if="fieldConfig[fieldname] != undefined">
							{{fieldConfig[fieldname].label}}
						</div>
						<i data-ng-if="fieldConfig[fieldname] == undefined">
							{{customFieldConfig.entry[fieldname].label}}
						</i>
					</div>
				</div></dd>
				<dt translate="Sense Level Fields"></dt>
				<dd><div class="controls">
					<div data-ng-repeat="fieldname in configDirty.entry.fields.senses.fieldOrder" 
						data-ng-click="selectField(fieldname)" 
						data-ng-class="{selected:currentField.name == fieldname}">
						<div data-ng-if="fieldConfig[fieldname] != undefined">
							{{fieldConfig[fieldname].label}}
						</div>
						<i data-ng-if="fieldConfig[fieldname] == undefined">
							{{customFieldConfig.senses[fieldname].label}}
						</i>
					</div>
				</div></dd>
				<dt translate="Example Level Fields"></dt>
				<dd><div class="controls">
					<div data-ng-repeat="fieldname in configDirty.entry.fields.senses.fields.examples.fieldOrder" 
						data-ng-click="selectField(fieldname)" 
						data-ng-class="{selected:currentField.name == fieldname}">
						<div data-ng-if="fieldConfig[fieldname] != undefined">
							{{fieldConfig[fieldname].label}}
						</div>
						<i data-ng-if="fieldConfig[fieldname] == undefined">
							{{customFieldConfig.examples[fieldname].label}}
						</i>
					</div>
				</div></dd>
			</dl>
			<small translate="Custom Fields shown in <i>italics</i>"></small>
		</div>
		
		<!-- Right column: field setup -->
		<div class="span9">
			<!-- control buttons -->
			<div class="control-group">
				<button class="btn" data-ng-click=""
					data-ng-disabled="true">
					<i class="icon-remove"></i> {{'Remove Custom Field' | translate}} </button>
			</div>
			
			<!-- settings -->
			<div class="well">
				<h3>{{fieldConfig[currentField.name].label}} Field Setup</h3>
				<div class="control-group">
					<label class="control-label" for="displayName">{{'Display Name' | translate}}</label>
					<div class="controls">
						<input type="text" id="displayName" data-ng-model="fieldConfig[currentField.name].label"/>
					</div>
					<div class="controls">
						<label class="checkbox {{interfaceConfig.pullNormal}}">
							<input type="checkbox" disabled data-ng-model="fieldConfig[currentField.name].hideEmpty"/>{{'Hidden if empty' | translate}}</label>
					</div>
					<br />
				</div>
				
				<div data-ng-if="fieldConfig[currentField.name].inputSystems != undefined">
					<hr />
					<div class="row outer-flex control-group" data-ng-show="editInputSystems.collapsed">
						<div class="span3 picklists">
							<label class="control-label" for="inputSystem">{{'Input Systems' | translate}}</label>
							<ul class="unstyled indent1"  id="inputSystem">
								<li data-ng-click="currentField.inputSystems.tag = inputSystemTag" 
									data-ng-repeat="inputSystemTag in currentField.inputSystems.fieldOrder" 
									data-ng-class="{selected:currentField.inputSystems.tag == inputSystemTag}">
									<div class="checkbox"><input data-ng-model="currentField.inputSystems.selecteds[inputSystemTag]" type="checkbox"/>
										{{configDirty.inputSystems[inputSystemTag].abbreviation}}</div>
								</li>
							</ul>
							<a href="" data-ng-click="editInputSystems.collapsed = false">{{'Edit input systems' | translate}}</a>
						</div>
						<div class="span1 btn-group btn-group-vertical">
							<button class="btn" data-ng-click="moveUp(currentField.inputSystems.tag)" 
								data-ng-disabled="currentField.inputSystems.fieldOrder[0] == currentField.inputSystems.tag || !currentField.inputSystems.tag">
								&nbsp;&nbsp;<i class="icon-arrow-up"></i></button>
							<button class="btn" data-ng-click="moveDown(currentField.inputSystems.tag)" 
								data-ng-disabled="currentField.inputSystems.fieldOrder[currentField.inputSystems.fieldOrder.length - 1] == currentField.inputSystems.tag || !currentField.inputSystems.tag">
								&nbsp;&nbsp;<i class="icon-arrow-down"></i></button>
						</div>
					</div>
					<div data-collapse="editInputSystems.collapsed">
						<button class="btn btn-primary {{interfaceConfig.pullToSide}}" 
							data-ng-click="editInputSystems.done()"><i class="icon-ok"></i> {{'Done' | translate}}</button>
						<h3 style="font-weight:normal" translate="Edit Input Systems"></h3>
						<div data-ng-include="'/angular-app/languageforge/lexicon/views/configuration-input-systems.html'"></div>
					</div>
				</div>
			</div>
		</div>
		
		</div>
<!--  -->  
<pre>
currentField {{currentField | json}}
configDirty.entry {{configDirty.entry|json}}
</pre>

		</div>
	</tab>
	<tab heading="Tasks" class="{{interfaceConfig.pullNormal}}">
		<div data-ng-controller="TaskConfigCtrl">
		<div class="row outer-flex">
		
		<!-- Left column: task list -->
		<div class="span3 control-group">
			<dl class="picklists">
				<dt translate="Dashboard"></dt>
				<dd><div class="controls">
					<div data-ng-click="selectTask('dashboard')" 
						data-ng-class="{selected:currentTaskName == 'dashboard'}"
						translate="Dashboard">
					</div>
				</div></dd>
				<!-- 
				<dt translate="Dictionary"></dt>
				<dd><div class="controls">
					<div data-ng-click="selectTask('dbe')" 
						data-ng-class="{selected:currentTaskName == 'dbe'}" 
						translate="Browse &amp; Edit">
					</div>
				</div></dd>
				<dt translate="Add Information"></dt>
				<dd><div class="controls">
					<div data-ng-click="selectTask('addMeanings')" 
						data-ng-class="{selected:currentTaskName == 'addMeanings'}" 
						translate="Add Meanings">
					</div>
					<div data-ng-click="selectTask('addGrammar')" 
						data-ng-class="{selected:currentTaskName == 'addGrammar'}" 
						translate="Add Parts of Speech">
					</div>
					<div data-ng-click="selectTask('addExamples')" 
						data-ng-class="{selected:currentTaskName == 'addExamples'}" 
						translate="Add Example Sentences">
					</div>
				</div></dd>
				 -->
				<dt translate="Gather Words"></dt>
				<dd><div class="controls">
					<!-- 
					<div data-ng-click="selectTask('gatherTexts')" 
						data-ng-class="{selected:currentTaskName == 'gatherTexts'}" 
						translate="From Texts">
					</div>
					<div data-ng-click="selectTask('wordlist')" 
						data-ng-class="{selected:currentTaskName == 'wordlist'}" 
						translate="From a Word List">
					</div>
					 -->
					<div data-ng-click="selectTask('semdom')" 
						data-ng-class="{selected:currentTaskName == 'semdom'}" 
						translate="From Semantic Domains">
					</div>
				</div></dd>
				<!-- 
				<dt translate="Review"></dt>
				<dd><div class="controls">
					<div data-ng-click="selectTask('review')" 
						data-ng-class="{selected:currentTaskName == 'review'}" 
						translate="Review">
					</div>
				</div></dd>
				<dt translate="Settings"></dt>
				<dd><div class="controls">
					<div data-ng-click="selectTask('importExport')" 
						data-ng-class="{selected:currentTaskName == 'importExport'}" 
						translate="Import/Export">
					</div>
					<div data-ng-click="selectTask('configuration')" 
						data-ng-class="{selected:currentTaskName == 'configuration'}" 
						translate="Dictionary Configuration">
					</div>
				</div></dd>
				 -->
			</dl>
		</div>
		
		<!-- Right column: task setup -->
		<div class="span9">
			<div class="well" data-ng-show="currentTaskName == 'dashboard'">
				<h3 translate="Dashboard"></h3>
				<div class="control-group">
					<label class="control-label" for="timeRange" translate="Activity time range"></label>
					<div class="controls">
						<select class="form-control" id="timeRange" 
							data-ng-model="configDirty.tasks['dashboard'].timeRange" 
							data-ng-options="selects.timeRange.options[key] for key in selects.timeRange.optionsOrder">
							<option value="">-- {{'choose a time range' | translate}} --</option></select>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="wordCount" translate="Target word count"></label>
					<div class="controls">
						<input type="number" min="0" id="wordCount" 
							data-ng-model="configDirty.tasks['dashboard'].targetWordCount">
					</div>
				</div>
			</div>
			<div class="well" data-ng-show="currentTaskName == 'semdom'">
				<h3 translate="Gather Words from Semantic Domains"></h3>
				<div class="control-group">
					<label class="control-label" for="language" translate="Language"></label>
					<div class="controls">
						<select class="form-control" id="language" 
							data-ng-model="configDirty.tasks['semdom'].language" 
							data-ng-options="key as option for (key, option) in selects.language.options">
							<option value="">-- {{'choose a language' | translate}} --</option></select>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="fields" translate="Fields to gather along with the Word"></label>
					<dl class="indent1" id="fields">
						<dt translate="Senses"></dt>
						<dd><div class="controls">
							<label class="checkbox">
								<input type="checkbox" data-ng-model="configDirty.tasks['semdom'].visibleFields.definition">
								 {{'Definition (Meaning)' | translate}}</label>
							<label class="checkbox">
								<input type="checkbox" data-ng-model="configDirty.tasks['semdom'].visibleFields.partOfSpeech">
								 {{'Part Of Speech' | translate}}</label>
						</div></dd>
						<dt translate="Examples"></dt>
						<dd><div class="controls">
							<label class="checkbox">
								<input type="checkbox" data-ng-model="configDirty.tasks['semdom'].visibleFields.sentence">
								 {{'Example Sentence' | translate}}</label>
							<label class="checkbox">
								<input type="checkbox" data-ng-model="configDirty.tasks['semdom'].visibleFields.translation">
								 {{'Example Translation' | translate}}</label>
						</div></dd>
					</dl>
				</div>
			</div>
		</div>
		
		</div>
<!-- 
<pre>
configDirty.tasks['{{currentTaskName}}'] = {{configDirty.tasks[currentTaskName] | json}}
</pre>
 -->
		</div>
	</tab>
	<tab heading="Option Lists" class="{{interfaceConfig.pullNormal}}">
		<div data-ng-controller="OptionListCtrl">
			<div class="row outer-flex">

				<!-- Left column: task list -->
				<div class="span3 control-group picklists">
					<fieldset class="well" id="editListValuesFieldset">
						<legend>Select a list</legend>
						<ul class="unstyled">
							<li ng-click="selectList('pos')" data-ng-class="{selected:currentListId == 'pos'}">Part of Speech</li>
							<!-- future lists go here -->
						</ul>
					</fieldset>
				</div>

				<!-- Right column: task setup -->
				<div class="span9">
					<fieldset class="well" id="picklistEditorFieldset">
						<legend style="width:auto;">{{optionLists[currentListId].name}}</legend>
						<picklist-editor items="optionLists[currentListId].items" default-key="optionLists[currentListId].defaultKey"></picklist-editor>
					</fieldset>
				</div>

			</div>
			<!--
			<pre>
			configDirty.tasks['{{currentTaskName}}'] = {{configDirty.tasks[currentTaskName] | json}}
			</pre>
			 -->
		</div>
	</tab>
</tabset>
</form>
</div>
