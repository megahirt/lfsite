<div data-ng-cloak data-ng-controller="editCtrl" id="lexAppContainer">
    <div style="display:flex;justify-content:space-between; margin-top:45px;margin-bottom: 10px">
        <div>
            <a ng-show="state == 'edit'" class="btn" ng-click="returnToList()" tooltip="{{'Back to List'|translate}}"><i style="position: relative; top:1px; right:5px" class="icon-large icon-long-arrow-left"></i> {{'List'|translate}}</a>
            <a ng-show="state == 'comment'" class="btn" ng-click="editEntry(currentEntry.id)" tooltip="{{'Return to Edit Entry'|translate}}"><i style="position: relative; top:1px; right:5px" class="icon-large icon-long-arrow-left"></i> {{'Edit'|translate}}</a>
        </div>
        <div>
            <h2 style="text-align: center;margin:0" data-translate="Dictionary Browse and Edit"></h2>
        </div>
        <div>
            <a ng-show="state == 'edit'" style="color:white" class="btn btn-warning" ng-click="showComments()" tooltip="{{'Show Comments'|translate}}">
                <span ng-show="getFieldCommentCount() > 1">
                    {{getFieldCommentCount()}} {{'Comments'|translate}}
                </span>
                <span ng-hide="getFieldCommentCount() > 1">
                    {{getFieldCommentCount()}} {{'Comment'|translate}}
                </span>
                <i style="position: relative; top:1px;left:5px" class="icon-large icon-long-arrow-right"></i></a>
        </div>
    </div>


    <!-- entry list view -->
    <div id="lexAppListView" ng-show="state == 'list'">
        <div class="lexiconHeaderContainer">
            <div class="lexiconHeaderItem">
                <button class="btn btn-success" data-ng-click="newEntry()"><i class="icon-plus"></i> {{'New Word' | translate}} </button>
            </div>
            <div ng-hide="show.entries.length === 0" style="width:340px;" class="lexiconHeaderItem">
                <typeahead style="margin:0px" class="typeahead" placeholder="'Search Entries'" items="typeahead.searchResults" term="typeahead.searchItemSelected" search="typeahead.searchEntries" select="typeahead.searchSelect">
                    <ul ng-show="typeahead.searchResults.length > 0">
                        <li data-typeahead-item="e" data-ng-repeat="e in typeahead.searchResults |limitTo: 10" class="typeahead-item">
                            <p class="listItemPrimary" ng-bind-html="getWordForDisplay(e)"></p>
                            <p class="listItemSecondary" ng-bind-html="getMeaningForDisplay(e)"></p>
                        </li>
                        <li style="text-align:center; background-color: #d3d3d3; color:black;margin-top:5px" ng-show="typeahead.searchResults.length > 0"><small ><i>{{typeahead.searchResults.length}} match(es)</i></small></li>
                    </ul>
                </typeahead>
            </div>
            <div class="lexiconHeaderItem">
                <span style="color: grey">{{entries.length}} {{'entries' | translate}}</span>
            </div>
        </div>
        <div style="border-bottom: 1px solid darkgray; width:100%;margin-top:15px"></div>
        <div class="lexiconItemListContainer" data-pui-when-scrolled="show.more()">
            <div class="lexiconListItem" data-ng-repeat="entry in show.entries track by entry.id" data-ng-click="editEntryAndScroll(entry.id)">
                <dc-rendered config="config.entry" model="entry"></dc-rendered>
            </div>
        </div>
    </div>


    <!-- edit view -->
    <div id="lexAppEditView" ng-show="state == 'edit'">
        <div style="flex: 1; border-right: 1px #dcdcdc solid">
            <div style="margin: 5px 5px 5px 0">
                <button class="btn btn-success btn-small" data-ng-click="newEntry()"><i class="icon-plus"></i> {{'New Word' | translate}} </button>
                <small style="color: grey; margin-left:2px">{{entries.length}} {{'entries' | translate}}</small>
            </div>
            <div style="margin: 5px 5px 5px 0">
                <typeahead style="margin:0px" class="typeahead" placeholder="'Search Entries'" items="typeahead.searchResults" term="typeahead.searchItemSelected" search="typeahead.searchEntries" select="typeahead.searchSelect">
                    <ul ng-show="typeahead.searchResults.length > 0">
                        <li data-typeahead-item="e" data-ng-repeat="e in typeahead.searchResults |limitTo: 10" class="typeahead-item">
                            <p class="listItemPrimary" ng-bind-html="getWordForDisplay(e)"></p>
                            <p class="listItemSecondary" ng-bind-html="getMeaningForDisplay(e)"></p>
                        </li>
                        <li style="text-align:center; background-color: #d3d3d3; color:black;margin-top:5px" ng-show="typeahead.searchResults.length > 0"><small ><i>{{typeahead.searchResults.length}} match(es)</i></small></li>
                    </ul>
                </typeahead>
            </div>
            <div style="margin-right: 10px; display:flex; flex-direction: column">
                <div id="compactEntryListContainer" class="lexiconItemListContainer" data-pui-when-scrolled="show.more()">
                    <div id="entryId_{{entry.id}}" ng-class="{selected: entry.id == currentEntry.id}" title="{{getCompactItemListOverlay(entry)}}" class="lexiconListItemCompact" data-ng-repeat="entry in show.entries track by entry.id" data-ng-click="editEntry(entry.id)">
                        <div class="listItemPrimary" ng-bind-html="getWordForDisplay(entry)"></div>
                        <div class="listItemSecondary" ng-bind-html="getMeaningForDisplay(entry)"></div>

                    </div>
                </div>
            </div>
        </div>

        <div style="flex: 4;padding:5px;display: flex; flex-direction: column">
            <div style="margin-bottom: 5px; border-bottom: solid black 1px">
                <div ng-show="rights.canEditEntry()" style="float:right; position:relative; top:-5px">
                    <button data-ng-show="rights.canDeleteEntry()" data-ng-click="deleteEntry(currentEntry)" class="btn btn-mini" title="{{ 'Delete Entry' | translate }}"> <i class="icon-remove"></i> {{'Word' | translate}} </button>
                    <button class="btn btn-mini" style="margin-left:20px; margin-right: 10px" data-ng-disabled="!currentEntryIsDirty()" data-ng-click="saveCurrentEntry(true)"> <i class="icon-save"></i> {{saveButtonTitle()}} </button>
                    <span style="color: grey;">{{saveNotice()}}</span>
                </div>
                <dc-rendered config="config.entry" model="currentEntry"></dc-rendered>
            </div>
            <div style="margin-top:5px">
                <div class="entryItemView" data-ng-show="entryLoaded()">
                    <dc-entry config="config.entry" model="currentEntry" control="control"></dc-entry>
                </div>
            </div>
        </div>
    </div>
    <!--
    <div class="row">
        <div class="span10">
            <pre>currentEntry {{currentEntry|json}}</pre>
        </div>
    </div>
    -->


    <!-- comment view -->
    <div id="lexAppCommentView" ng-show="state == 'comment'">
        <div style="flex: 10;padding:5px;display: flex; flex-direction: column">
            <div style="margin-bottom: 5px; border-bottom: solid black 1px">
                <dc-rendered config="config.entry" model="currentEntry"></dc-rendered>
            </div>
            <div style="margin-top:5px">
                <div class="entryItemView" data-ng-show="entryLoaded()">
                    <dc-entry config="config.entry" model="currentEntry" control="control"></dc-entry>
                </div>
            </div>
        </div>
        <div style="flex: 9;padding:5px;display: flex; flex-direction: column">
            <div style="margin-bottom: 5px; border-bottom: solid black 1px">
                <div ng-show="rights.canEditEntry()" style="float:right; position:relative; top:-5px">
                    <button data-ng-show="rights.canDeleteEntry()" data-ng-click="deleteEntry(currentEntry)" class="btn btn-mini" title="{{ 'Delete Entry' | translate }}"> <i class="icon-remove"></i> {{'Word' | translate}} </button>
                    <button class="btn btn-mini" style="margin-left:20px; margin-right: 10px" data-ng-disabled="!currentEntryIsDirty()" data-ng-click="saveCurrentEntry(true)"> <i class="icon-save"></i> {{saveButtonTitle()}} </button>
                    <span style="color: grey;">{{saveNotice()}}</span>
                </div>
                <div >
                </div>
                <dc-rendered config="config.entry" model="currentEntry"></dc-rendered>
            </div>
            <div style="margin-top:5px">
                <div class="entryItemView" data-ng-show="entryLoaded()">
                    <dc-entry config="config.entry" model="currentEntry" control="control"></dc-entry>
                </div>
            </div>
        </div>
    </div>
    <!--
    <div class="row">
        <div class="span10">
            <pre>currentEntry {{currentEntry|json}}</pre>
        </div>
    </div>
    -->



</div>

<!--
<div class="row outer-flex" style="margin-top:20px">
<-- Left column: entry list control ->
<div class="span4">
    <-- control buttons ->
    <div class="control-group">
        <button class="btn btn-success" data-ng-click="newEntry()"><i class="icon-plus"></i> {{'New Word' | translate}} </button>
    </div>

    <div data-ng-show="show.entries.length > 0">

        <!-- entry list search ->
        <div style="margin-bottom:10px">
            <span class="{{interfaceConfig.pullToSide}}" style="color: grey"><span>{{entriesTotalCount}}</span> {{'entries' | translate}}</span>
            <!-- <span class="{{interfaceConfig.pullToSide}}" style="color: grey">{{ '{num} entries' | translate: '{ num: entriesTotalCount }' }}</span> ->
            <typeahead style="margin:0px" class="typeahead" placeholder="'Search Entries'" items="typeahead.searchResults" term="typeahead.searchItemSelected" search="typeahead.searchEntries" select="typeahead.searchSelect">
                <ul>
                    <li data-typeahead-item="e" data-ng-repeat="e in typeahead.searchResults" class="typeahead-item">
                        <p class="name">{{getWordForDisplay(e)}}</p>
                        <p class="email">{{getDefinitionOrGloss(e)}}</p>
                    </li>
                </ul>
            </typeahead>
            <span style="margin-left:10px" title="Clear Filter" data-ng-click="searchText = ''" data-ng-show="searchText && searchText != ''">
                <i class="icon-remove" style="color:black; cursor: pointer"></i>
            </span>
        </div>

        <!-- entry list ->
        <div id="entryList" data-pui-when-scrolled="show.more()">
            <table class="table table-condensed ">
                <tbody>
                    <tr data-ng-class="{selected: e.id == currentEntry.id}" class="animate-repeat" data-ng-repeat="e in show.entries track by e.id">
                        <td style="width:50%; text-align:{{lexemeAlign(e)}}" title="{{getWordForDisplay(e)}}" data-ng-click="editEntry(e.id)">{{getWordForDisplay(e)| characters:40}}</td>
                        <td style="text-align:{{definitionOrGlossAlign(e)}}"title="{{getDefinitionOrGloss(e)}}" data-ng-click="editEntry(e.id)">{{getDefinitionOrGloss(e)| characters:40}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
-->
		
