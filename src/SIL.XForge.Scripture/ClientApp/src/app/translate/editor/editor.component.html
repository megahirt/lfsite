<div mdcHeadline6>{{ textName }}</div>
<div class="toolbar" fxLayout="row" fxLayoutAlign="start center">
  <app-chapter-nav [(chapter)]="chapter" [chapters]="chapters"></app-chapter-nav>
  <div class="toolbar-separator">&nbsp;</div>
  <div mdcMenuSurfaceAnchor #suggestionsAnchor>
    <button
      #suggestionsMenuButton
      mdc-icon-button
      icon="linear_scale"
      title="Adjust suggestion confidence"
      (click)="suggestionsMenu.open = !suggestionsMenu.open"
      [class.mdc-icon-button--activated]="suggestionsMenu.open"
    ></button>
    <mdc-menu-surface
      class="suggestions-menu"
      #suggestionsMenu
      [anchorElement]="suggestionsAnchor"
      [quickOpen]="true"
      anchorCorner="bottomStart"
      (opened)="suggestionsMenuOpened()"
      (closed)="suggestionsMenuClosed()"
    >
      <div mdcSubtitle1 fxLayout="row" fxLayoutAlign="center">Suggestion Confidence</div>
      <div class="slider-labels" fxLayout="row" fxLayoutAlign="space-between">
        <span mdcCaption>More</span> <span mdcCaption>{{ confidenceThreshold }}%</span> <span mdcCaption>Better</span>
      </div>
      <mdc-slider
        id="confidence-threshold-slider"
        *ngIf="displaySlider"
        [min]="0"
        [max]="100"
        [(ngModel)]="confidenceThreshold"
      ></mdc-slider>
    </mdc-menu-surface>
  </div>
  <button
    mdc-icon-button
    appBlurOnClick
    icon="swap_horiz"
    (click)="isTargetTextRight = !isTargetTextRight"
    title="Swap source and target"
  ></button>
</div>
<div [fxLayout]="isTargetTextRight ? 'row' : 'row-reverse'" fxFlex="1 1 0%" fxLayoutGap="5px">
  <div class="text-area">
    <div mdcSubtitle1>{{ sourceLabel }}</div>
    <div class="text-container">
      <app-text
        #source
        [isReadOnly]="true"
        [highlightSegment]="target.hasFocus"
        (loaded)="onTextLoaded('source')"
      ></app-text>
    </div>
  </div>
  <div class="swap-button-container"></div>
  <div class="text-area">
    <div mdcSubtitle1>{{ targetLabel }}</div>
    <div class="text-container">
      <app-text
        #target
        [isReadOnly]="false"
        (updated)="onTargetUpdated($event.segment, $event.delta, $event.prevSegment)"
        (loaded)="onTextLoaded('target')"
      ></app-text>
      <app-suggestion
        [mdcElevation]="2"
        [show]="showSuggestion"
        [words]="suggestionWords"
        [confidence]="suggestionConfidence"
        [text]="target"
        (selected)="insertSuggestion($event.index, $event.event)"
      ></app-suggestion>
    </div>
  </div>
</div>
