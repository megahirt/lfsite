<?php
use libraries\lfdictionary\commands\GetDomainTreeListCommand;

require_once(dirname(__FILE__) . '/../../TestConfig.php');
require_once(SimpleTestPath . 'autorun.php');

class TestOfGetDomainListCommand extends UnitTestCase {

	private $FINAL_RESULT= '{"key":null,"guid":null,"children":[{"key":"1 Universe, creation","guid":"63403699-07c1-43f3-a47c-069d6e4316e5","children":[{"key":"1.1 Sky","guid":"999581c4-1611-4acb-ae1b-5e6c1dfe6f0c","children":[{"key":"1.1.1 Sun","guid":"dc1a2c6f-1b32-4631-8823-36dacc8cb7bb","children":[]},{"key":"1.1.2 Air","guid":"e836b01b-6c1a-4d41-b90a-ea5f349f88d4","children":[]},{"key":"1.1.3 Weather","guid":"b4aa4bbd-8abf-4503-96e4-05c75efd23d5","children":[]}]},{"key":"1.2 World","guid":"b47d2604-8b23-41e9-9158-01526dd83894","children":[{"key":"1.2.1 Land","guid":"cce98603-ff8f-4213-945a-bd6746716139","children":[]},{"key":"1.2.2 Substance, matter","guid":"f899802d-bd32-427f-a101-c84219f7e14e","children":[{"key":"1.2.2.1 Soil, dirt","guid":"180a2220-942c-4e17-96ee-cd4f63a4c715","children":[]},{"key":"1.2.2.2 Rock","guid":"0f07adb7-4387-4723-9800-8362e825ad45","children":[]},{"key":"1.2.2.3 Metal","guid":"3df7d174-83d1-4e17-890e-1272e171ca41","children":[]},{"key":"1.2.2.4 Mineral","guid":"56c9c38c-728a-42fe-b93c-6ca67fdf2a9a","children":[]},{"key":"1.2.2.5 Jewel","guid":"21bcc306-13cb-4162-98b3-2ba319ba14ea","children":[]}]},{"key":"1.2.3 Solid, liquid, gas","guid":"756728a8-9eb8-4329-aee2-d6a3d64585f2","children":[{"key":"1.2.3.1 Liquid","guid":"f56a2511-10cc-4829-940d-49051429bfba","children":[]},{"key":"1.2.3.2 Oil","guid":"962cb994-0183-4ac5-94b2-82a33f1d64e4","children":[]},{"key":"1.2.3.3 Gas","guid":"34c3edad-a158-44e7-989b-5b74401e6945","children":[]}]}]},{"key":"1.3 Water","guid":"60364974-a005-4567-82e9-7aaeff894ab0","children":[{"key":"1.3.1 Bodies of water","guid":"79ebb5ce-f0fd-4fb5-9f22-1fa4965a555b","children":[{"key":"1.3.1.1 Ocean, lake","guid":"14e9c20c-6eb5-49a4-a03f-3be26a934500","children":[]},{"key":"1.3.1.2 Swamp","guid":"31777669-e37b-4b77-9cce-0d8c33f6ebb9","children":[]},{"key":"1.3.1.3 River","guid":"4153416a-784d-4f7c-a664-2640f7979a14","children":[]},{"key":"1.3.1.4 Spring, well","guid":"bf6e1719-11ee-4ace-9c84-72019c01aabc","children":[]},{"key":"1.3.1.5 Island, shore","guid":"928741b5-bff6-4dd1-be37-ec6e7a4eb6ca","children":[]}]},{"key":"1.3.3 Wet","guid":"f38f8344-838f-44ba-b103-22289c2d2793","children":[{"key":"1.3.3.1 Dry","guid":"0b0801a3-8a0c-40ea-bf41-07df80bd0d5f","children":[]}]}]}]},{"key":"2 Person","guid":"ba06de9e-63e1-43e6-ae94-77bea498379a","children":[{"key":"2.1 Body","guid":"1b0270a5-babf-4151-99f5-279ba5a4b044","children":[{"key":"2.1.1 Head","guid":"d98c1c67-b70e-4a35-89db-2e744bd5197f","children":[{"key":"2.1.1.1 Eye","guid":"bc8d0ad4-6ebf-4fa0-bc7e-60e8ec9c43db","children":[]}]},{"key":"2.1.2 Torso","guid":"a80f12aa-c30d-4892-978a-b076985742d5","children":[]},{"key":"2.1.3 Limb","guid":"c5282457-be5f-4ce9-a802-91140cb0a22b","children":[]}]},{"key":"2.2 Body functions","guid":"7fe69c4c-2603-4949-afca-f39c010ad24e","children":[{"key":"2.2.1 Breathe, breath","guid":"a1959b00-9702-4b45-ac46-93f18d3bc5e6","children":[]},{"key":"2.2.2 Cough, sneeze","guid":"8b52a9d6-a07e-4ac8-8f84-6eb5ba578d97","children":[]}]}]}]}';
	
	function testListCommand() {
		$command = new GetDomainTreeListCommand(DicTestPath . "data/domain-test-th.xml", "en");
		$result = json_encode($command->execute()->encode());
		$this->assertEqual($this->FINAL_RESULT, $result);
	}
}

?>